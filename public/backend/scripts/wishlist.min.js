!function(t,a){t.fn.loadTableWishlist=function(){var a=Handlebars.compile(t("#painel-"+tableWishlist.id).html()),e=t("#"+tableWishlist.id).DataTable({processing:!0,serverSide:!0,ajax:{url:tableWishlist.url,type:"POST",dataType:"json",headers:{"X-CSRF-TOKEN":tableWishlist.token}},sScrollX:!0,sScrollXInner:"100%",buttons:["reset"],sPaginationType:"full_numbers",iDisplayLength:tableWishlist.limit,sDom:'CB<"clear"><"dataTables_header"lfr>t<"dataTables_footer"ip>',fnDrawCallback:function(a){tableWishlist.tableStyled||(t("#"+tableWishlist.id).closest(".dataTables_wrapper").find(".dataTables_length select").addClass("select "+tableWishlist.color+" glossy").styleSelect(),t("#btn-reset").addClass(tableWishlist.color+" glossy"),tableWishlist.tableStyled=!0)},columns:[{data:"total",className:"align-center"},{data:"first_name"},{data:"admin"},{data:null,className:"details-control",orderable:!1,searchable:!1,defaultContent:""}],order:[[0,"desc"]]});t("#"+tableWishlist.id).on("click",tableWishlist.openDetails,function(){if(event.target===this){var s=t(this).closest("tr"),l=e.row(s);l.child.isShown()?(l.child.hide(),s.removeClass("shown"),s.children().removeClass(tableWishlist.colorSel)):(l.child(a(l.data())).show(),s.addClass("shown"),s.children().addClass(tableWishlist.colorSel))}}),reloadWishlist=function(a,e){t.ajax({url:e,success:function(e){t("#list-"+a).html(e)},error:function(t){msgNotifica(!1,"Houve um erro no servidor",!0,!1)}})},formEditWishlist=function(a){var s=t("#"+a),l=s.attr("action");t.ajax({type:"PUT",dataType:"json",url:l,data:s.serialize(),beforeSend:function(){setBtn(4,tableWishlist.txtLoader,!1,"loader","btn-modal",!1,"silver")},success:function(t){1==t.success?(msgNotifica(!0,t.message,!0,!1),fechaModal(),e.ajax.reload()):msgNotifica(!1,t.message,!0,!1),setBtn(4,tableWishlist.txtSave,!0,"icon-publish","btn-modal",!1,"blue")},error:function(t){setBtn(4,tableWishlist.txtSave,!0,"icon-publish","btn-modal",!1,"blue"),ajaxFormError(t)}})},deleteWiswlistProduct=function(a,e){t.modal.confirm(tableWishlist.txtConfirm+"?",function(){t.ajax({type:"DELETE",dataType:"json",headers:{"X-CSRF-TOKEN":tableWishlist.token},url:e,success:function(e){1==e.success?(t("#"+a).hide(),msgNotifica(!0,e.message,!0,!1)):msgNotifica(!1,e.message,!0,!1)},error:function(t){ajaxFormError(t)}})},function(){t.modal.alert(tableWishlist.txtCancel)})},deleteWishlistAll=function(a,s){t.modal.confirm(tableWishlist.txtConfirmAll+"?",function(){t.ajax({type:"DELETE",dataType:"json",headers:{"X-CSRF-TOKEN":tableWishlist.token},url:a,success:function(t){1==t.success?(e.ajax.reload(),msgNotifica(!0,t.message,!0,!1)):msgNotifica(!1,t.message,!0,!1)},error:function(t){ajaxFormError(t)}})},function(){t.modal.alert(tableWishlist.txtCancel)})},saveWishlist=function(a,s){t.modal.confirm(tableWishlist.txtConfirmOrder,function(){t.ajax({type:"GET",dataType:"json",url:s,success:function(t){1==t.success?(e.ajax.reload(),msgNotifica(!0,t.message,!0,!1)):msgNotifica(!1,t.message,!0,!1)},error:function(t){ajaxFormError(t)}})},function(){})}}}(jQuery),function(t,a){t.fn.loadTableProducts=function(a,e,s,l){var i=t("#"+a).DataTable({processing:!0,serverSide:!0,sPaginationType:"full_numbers",sScrollX:!0,sScrollXInner:"100%",lengthChange:!1,info:!1,ajax:{url:s,type:"POST",dataType:"json",headers:{"X-CSRF-TOKEN":l}},columns:[{data:null,className:"details-control",orderable:!1,searchable:!1,defaultContent:""},{data:"image"},{data:"code"},{data:"color"}],order:[[2,"desc"]]}),o=[];t("#"+a+" tbody").on("click","tr td.details-control",function(){var a=t(this).closest("tr"),e=i.row(a),s=t.inArray(a.attr("id"),o);e.child.isShown()?(a.removeClass("details"),e.child.hide(),o.splice(s,1)):(a.addClass("details"),e.child(htmlWiswlist(e.data())).show(),-1===s&&o.push(a.attr("id")))}),i.on("draw",function(){t.each(o,function(a,e){t("#"+e+" td.details-control").trigger("click")})}),htmlWiswlist=function(t){var a="addWiswlist('form-add-wishlist-"+t.id+"','"+t.id+"')";return'<form id="form-add-wishlist-'+t.id+'" method="post" action="'+t.action+'" class="columns" onsubmit="return false"><input type="hidden" name="_token" value="'+t.token+'"><fieldset class="fieldset"><legend class="legend">Selecione a Grade</legend>'+t.grids+'<div class="align-right"><button id="btn-modal-'+t.id+'" onclick="'+a+'" class="button blue-gradient icon-publish" title="Salvar">Salvar</button></div></fieldset></form><br/>'},addWiswlist=function(a,s){var l=t("#"+a),i=l.attr("action");t.ajax({type:"POST",dataType:"json",url:i,data:l.serialize(),beforeSend:function(){setBtn(4,tableWishlist.txtLoader,!1,"loader","btn-modal-"+s,!1,"silver")},success:function(t){1==t.success?(reloadWishlist(e,t.reload),msgNotifica(!0,t.message,!0,!1),fechaModal()):msgNotifica(!1,t.message,!0,!1),setBtn(4,tableWishlist.txtSave,!0,"icon-publish","btn-modal-"+s,!1,"blue")},error:function(t){setBtn(4,tableWishlist.txtSave,!0,"icon-publish","btn-modal-"+s,!1,"blue"),ajaxFormError(t)}})}}}(jQuery);
