!function(e,a){e.fn.loadTableOrders=function(){var a=Handlebars.compile(e("#painel-"+tableOrders.id).html()),r=e("#"+tableOrders.id).DataTable({processing:!0,serverSide:!0,ajax:{url:tableOrders.url,type:"POST",dataType:"json",headers:{"X-CSRF-TOKEN":tableOrders.token}},sScrollX:!0,sScrollXInner:"100%",buttons:["reset"],sPaginationType:"full_numbers",iDisplayLength:tableOrders.limit,sDom:'CB<"clear"><"dataTables_header"lfr>t<"dataTables_footer"ip>',fnDrawCallback:function(a){tableOrders.tableStyled||(e("#"+tableOrders.id).closest(".dataTables_wrapper").find(".dataTables_length select").addClass("select "+tableOrders.color+" glossy").styleSelect(),e("#btn-reset").addClass(tableOrders.color+" glossy"),tableOrders.tableStyled=!0)},columns:[{data:"id",className:"align-center",orderable:!1,searchable:!1},{data:"state",className:"align-center",orderable:!1,searchable:!1},{data:"name",orderable:!1,searchable:!1},{data:"profile",orderable:!1,searchable:!1},{data:"payment",orderable:!1,searchable:!1},{data:"subtotal",orderable:!1,searchable:!1},{data:"status_label",orderable:!1,searchable:!1},{data:"created_at",className:"align-center",orderable:!1,searchable:!1},{data:null,className:"details-control",orderable:!1,searchable:!1,defaultContent:""}]});e("#"+tableOrders.id).on("click",tableOrders.openDetails,function(){if(event.target===this){var t=e(this).closest("tr"),s=r.row(t);s.child.isShown()?(s.child.hide(),t.removeClass("shown"),t.children().removeClass(tableOrders.colorSel)):(s.child(a(s.data())).show(),t.addClass("shown"),t.children().addClass(tableOrders.colorSel))}}),e(".dataTables_filter input").unbind().bind("input",function(e){(this.value.length>=3||13==e.keyCode)&&r.search(this.value).draw(),""==this.value&&r.search("").draw()}),formOrders=function(a,t){var s=e("#form-"+t),l=s.attr("action");e.ajax({type:"POST",dataType:"json",url:l,data:s.serialize(),beforeSend:function(){setBtn(4,tableOrders.txtLoader,!1,"loader","btn-modal",!1,"silver")},success:function(e){1==e.success?(msgNotifica(!0,e.message,!0,!1),fechaModal(),r.ajax.reload()):msgNotifica(!1,e.message,!0,!1),setBtn(4,tableOrders.txtSave,!0,"icon-publish","btn-modal",!1,"blue")},error:function(e){setBtn(4,tableOrders.txtSave,!0,"icon-publish","btn-modal",!1,"blue"),ajaxFormError(e)}})},deleteOrder=function(a){e.modal.confirm(tableOrders.txtConfirm+"?",function(){e.ajax({type:"DELETE",dataType:"json",headers:{"X-CSRF-TOKEN":tableOrders.token},url:a,success:function(e){1==e.success?(r.ajax.reload(),msgNotifica(!0,e.message,!0,!1)):msgNotifica(!1,e.message,!0,!1)},error:function(e){ajaxFormError(e)}})},function(){e.modal.alert(tableOrders.txtCancel)})},printerPdf=function(a){e.ajax({type:"GET",dataType:"json",url:a,success:function(e){1==e.success?window.open(e.pdf,"_blank"):msgNotifica(!1,e.message,!0,!1)},error:function(e){ajaxFormError(e)}})},formEditWishlist=function(a){var r=e("#"+a),t=r.attr("action");e.ajax({type:"PUT",dataType:"json",url:t,data:r.serialize(),beforeSend:function(){setBtn(4,tableOrders.txtLoader,!1,"loader","btn-modal",!1,"silver")},success:function(e){1==e.success?(msgNotifica(!0,e.message,!0,!1),fechaModal()):msgNotifica(!1,e.message,!0,!1),setBtn(4,tableOrders.txtSave,!0,"icon-publish","btn-modal",!1,"blue")},error:function(e){setBtn(4,tableOrders.txtSave,!0,"icon-publish","btn-modal",!1,"blue"),ajaxFormError(e)}})}}}(jQuery);
