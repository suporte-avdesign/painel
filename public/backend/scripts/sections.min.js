!function(t,e){t.fn.loadTableSections=function(){var e=Handlebars.compile(t("#painel-"+tableSection.id).html()),a=t("#"+tableSection.id).DataTable({processing:!0,serverSide:!0,ajax:{url:tableSection.url,type:"POST",dataType:"json",headers:{"X-CSRF-TOKEN":tableSection.token}},sScrollX:!0,sScrollXInner:"100%",buttons:["reset"],sPaginationType:"full_numbers",iDisplayLength:tableSection.limit,sDom:'CB<"clear"><"dataTables_header"lfr>t<"dataTables_footer"ip>',fnDrawCallback:function(e){tableSection.tableStyled||(t("#"+tableSection.id).closest(".dataTables_wrapper").find(".dataTables_length select").addClass("select "+tableSection.color+" glossy").styleSelect(),t("#btn-reset").addClass(tableSection.color+" glossy"),tableSection.tableStyled=!0)},columns:[{data:"order",className:"align-center"},{data:"name"},{data:"visits",className:"align-center"},{data:"description"},{data:"active",className:"align-center"},{data:null,className:"details-control",orderable:!1,searchable:!1,defaultContent:""}],order:[[0,"asc"]]});t("#"+tableSection.id).on("click",tableSection.openDetails,function(){if(event.target===this){var n=t(this).closest("tr"),o=a.row(n);o.child.isShown()?(o.child.hide(),n.removeClass("shown"),n.children().removeClass(tableSection.colorSel)):(o.child(e(o.data())).show(),n.addClass("shown"),n.children().addClass(tableSection.colorSel))}}),formSection=function(e){var n,o=t("#form-"+tableSection.id),s=o.attr("action");n="create"==e?tableSection.txtSave:tableSection.txtUpdate,t.ajax({type:"POST",dataType:"json",url:s,data:o.serialize(),beforeSend:function(){setBtn(4,"Aguarde",!1,"loader","btn-modal",!1,"silver")},success:function(o){if(1==o.success){if("create"==e){var s=t("#count_section").text(),i=parseFloat(s)+1;t("#count_section").text(i)}setBtn(4,n,!0,"icon-publish","btn-modal",!1,"blue"),a.ajax.reload(),msgNotifica(!0,o.message,!0,!1),fechaModal()}else setBtn(4,n,!0,"icon-publish","btn-modal",!1,"blue"),msgNotifica(!1,o.message,!0,!1)},error:function(t){setBtn(4,n,!0,"icon-publish","btn-modal",!1,"blue"),ajaxFormError(t)}})},deleteSection=function(e,n){t.modal.confirm(tableSection.txtConfirm+" "+n+"?",function(){t.ajax({type:"DELETE",dataType:"json",headers:{"X-CSRF-TOKEN":tableSection.token},url:e,success:function(e){if(1==e.success){var n=t("#count_section").text(),o=parseFloat(n)-1;t("#count_section").text(o);var s=t("#count_category").text(),i=parseFloat(s)-e.deleted.total_categories;t("#count_category").text(i);var l=t("#count_colors").html(),c=parseFloat(l)-e.deleted.total_colors;t("#count_colors").html(c);var r=t("#count_product").html(),d=parseFloat(r)-e.deleted.total_products;t("#count_product").html(d),a.ajax.reload(),msgNotifica(!0,e.message,!0,!1)}else msgNotifica(!1,e.message,!0,!1)},error:function(t){ajaxFormError(t)}})},function(){t.modal.alert(tableSection.txtCancel)})},typeGrideSection=function(e){"unit"===e&&(t("#grid-name").show(),t("#grid-unit").show(),t("#grid-kit").hide()),"kit"===e&&(t("#grid-name").show(),t("#grid-kit").show(),t("#grid-unit").hide())},plusUndSection=function(){t("#plus-unit").append('<span class="puls_grid input margin-right"><input type="text" name="label[]" value="" size="4" class="input-unstyled"><button onclick="removeGridSection(this,\'.puls_grid\');" class="remove-unit button red-gradient icon-minus" title="'+tableSection.texDelete+'"></button></span>')},plusKitSection=function(){t("#plus-kit").append('<p class="puls_grid button-height inline-small-label"><span class="input"><input type="text" name="qty[]" class="amount input-unstyled input-sep" placeholder="'+tableSection.texQty+'" value="0" maxlength="3" style="width: 30px;"><input type="text" name="des[]" class="input-unstyled" placeholder="'+tableSection.txtDesc+'" value="" style="width: 80px;"><button onclick="removeGridSection(this,\'.puls_grid\')" class="remove button red-gradient icon-minus" title="'+tableSection.texDelete+'"></button></span></p>'),sumGridsSection()},removeGridSection=function(e,a){t(e).parents(a).remove()},sumGridsSection=function(){var e=document.getElementsByClassName("amount"),a=[].map.call(e,function(t){return parseInt(t.value)}).reduce(function(t,e){return t+e});t("#total-grids").text(a)},formGridSection=function(e,a,n,o,s,i){var l=t("#form-"+n),c=l.attr("action");t.ajax({type:"POST",dataType:"json",url:c,data:l.serialize(),beforeSend:function(){setBtn(4,s,!1,"loader","btn-modal",!1,"silver")},success:function(a){1==a.success?t("#load-grids-"+e).load(o,function(){msgNotifica(!0,a.message,!0,!1)}):(setBtn(4,i,!0,"icon-outbox","btn-modal",!1,"blue"),msgNotifica(!1,a.message,!0,!1))},error:function(t){setBtn(4,i,!0,"icon-outbox","btn-modal",!1,"blue"),ajaxFormError(t)}})},deleteGridSection=function(e,a,n,o){t.modal.confirm(tableSection.txtRemove+" "+a+"?",function(){t.ajax({type:"DELETE",dataType:"json",headers:{"X-CSRF-TOKEN":o},url:n,success:function(a){1==a.success?(t("#grid_"+e).hide(),msgNotifica(!0,a.message,!0,!1)):msgNotifica(!1,a.message,!0,!1)},error:function(t){ajaxFormError(t)}})},function(){t.modal.alert(tableSection.txtCancel)})},preview_image=function(e,a){t("#image_preview_"+e).html("");for(var n=document.getElementById("upload_file").files.length,o=0;o<n;o++)t("#image_preview_"+e).append('<img src="'+URL.createObjectURL(event.target.files[o])+'" width="'+a+'">');t("#btn-upload-submit").show()},statusImage=function(e,a,n){t.ajax({type:"POST",dataType:"json",headers:{"X-CSRF-TOKEN":n},url:a,data:{_method:"put"},beforeSend:function(){t("#status-"+e).attr("class","button disabled")},success:function(a){1==a.success?(t("#status-"+e).attr("class",a.class),msgNotifica(!0,a.message,!0,!1)):msgNotifica(!1,a.message,!0,!1)},error:function(t){ajaxFormError(t)}})},deleteImage=function(e,a,n){t.ajax({type:"POST",dataType:"json",headers:{"X-CSRF-TOKEN":n},url:a,data:{_method:"delete"},success:function(a){1==a.success?(t("#img-"+e).remove(),msgNotifica(!0,a.message,!0,!1)):msgNotifica(!1,a.message,!0,!1)},error:function(t){ajaxFormError(t)}})},t("body").on("click","#btn-upload",function(e){t(this).parents("#form-image").ajaxForm(n)});var n={beforeSend:function(){setBtn(4,"Aguarde",!1,"loader","btn-upload",!1,"silver")},success:function(e){1==e.success?(setBtn(1,ac,!0,"icon-cloud-upload","btn-upload"),"create"==e.ac&&t("#gallery-"+e.idm).prepend('<li id="img-'+e.id+'"><img src="'+e.path+'" class="framed"><div class="controls"><span id="btns-'+e.id+'" class="button-group compact children-tooltip"><button id="status-'+e.id+'" onclick="'+e.url_status+'" class="'+e.class+'" title="'+e.btn.status+'"></button><button id="edit-'+e.id+'" onclick="'+e.url_edit+'" class="button" title="'+e.btn.edit+'">'+e.btn.edit+'</button><button id="delete-'+e.id+'" onclick="'+e.url_delete+'" class="button icon-trash red-gradient" title="'+e.btn.delete+'"></button></span></div></li>'),"update"==e.ac&&t("#img-"+e.id).html('<img src="'+e.path+'" class="framed"><div class="controls"><span id="btns-'+e.id+'" class="button-group compact children-tooltip"><button id="status-'+e.id+'" onclick="'+e.url_status+'" class="'+e.class+'" title="'+e.btn.status+'"></button><button id="edit-'+e.id+'" onclick="'+e.url_edit+'" class="button" title="'+e.btn.edit+'">'+e.btn.edit+'</button><button id="delete-'+e.id+'" onclick="'+e.url_delete+'" class="button icon-trash red-gradient" title="'+e.btn.delete+'"></button></span></div>'),fechaModal(),msgNotifica(!0,e.message,!0,!1)):msgNotifica(!1,e.message,!0,!1)},complete:function(t){setBtn(4,"Upload",!0,"icon-cloud-upload","btn-upload",!1,"blue")},error:function(t){ajaxFormError(t),setBtn(4,"Upload",!0,"icon-cloud-upload","btn-upload",!1,"blue")}}}}(jQuery);
