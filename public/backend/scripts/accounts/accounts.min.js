!function(t,a){t.fn.loadTableAccounts=function(){var a=Handlebars.compile(t("#painel-"+tableAccount.id).html()),e=t("#"+tableAccount.id).DataTable({processing:!0,serverSide:!0,ajax:{url:tableAccount.url_accounts,type:"POST",dataType:"json",headers:{"X-CSRF-TOKEN":tableAccount.token}},sScrollX:!0,sScrollXInner:"100%",buttons:["reset"],sPaginationType:"full_numbers",iDisplayLength:tableAccount.limit,sDom:'CB<"clear"><"dataTables_header"lfr>t<"dataTables_footer"ip>',fnDrawCallback:function(a){tableAccount.tableStyled||(t("#"+tableAccount.id).closest(".dataTables_wrapper").find(".dataTables_length select").addClass("select "+tableAccount.color+" glossy").styleSelect(),t("#btn-reset").addClass(tableAccount.color+" glossy"),tableAccount.tableStyled=!0)},columns:[{data:"id",className:"align-center"},{data:"profile_id"},{data:"first_name"},{data:"visits",className:"align-center"},{data:"admin"},{data:"active",className:"align-center"},{data:null,className:"details-control",orderable:!1,searchable:!1,defaultContent:""}],order:[[0,"desc"]]});t("#"+tableAccount.id).on("click",tableAccount.openDetails,function(){if(event.target===this){var l=t(this).closest("tr"),c=e.row(l);c.child.isShown()?(c.child.hide(),l.removeClass("shown"),l.children().removeClass(tableAccount.colorSel)):(c.child(a(c.data())).show(),l.addClass("shown"),l.children().addClass(tableAccount.colorSel))}}),t(".dataTables_filter input").unbind().bind("input",function(t){(this.value.length>=3||13==t.keyCode)&&e.search(this.value).draw(),""==this.value&&e.search("").draw()}),formAccount=function(a){var l,c=t("#form-"+tableAccount.id),n=c.attr("action");l="create"==a?tableAccount.txtSave:tableAccount.txtUpdate,t.ajax({type:"POST",dataType:"json",url:n,data:c.serialize(),beforeSend:function(){setBtn(4,"Aguarde",!1,"loader","btn-modal",!1,"silver")},success:function(t){1==t.success?(setBtn(4,l,!0,"icon-publish","btn-modal",!1,"blue"),e.ajax.reload(),msgNotifica(!0,t.message,!0,!1),fechaModal()):(setBtn(4,l,!0,"icon-publish","btn-modal",!1,"blue"),msgNotifica(!1,t.message,!0,!1))},error:function(t){setBtn(4,l,!0,"icon-publish","btn-modal",!1,"blue"),ajaxFormError(t)}})},deleteAccount=function(a,l,c){t("#note_"+a).val()<=0?t.modal.alert(tableAccount.txtAtert):t.modal.confirm(tableAccount.txtConfirm+" "+c+"?",function(){t.ajax({type:"DELETE",dataType:"json",headers:{"X-CSRF-TOKEN":tableAccount.token},url:l,success:function(t){1==t.success?(e.ajax.reload(),msgNotifica(!0,t.message,!0,!1)):msgNotifica(!1,t.message,!0,!1)},error:function(t){msgNotifica(!1,tableAccount.txtError,!0,!1)}})},function(){t.modal.alert(tableAccount.txtCancel)})}}}(jQuery);
