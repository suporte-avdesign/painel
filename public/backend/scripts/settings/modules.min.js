!function(a){a.fn.loadTableProfile=function(){var e=Handlebars.compile(a("#"+avdTable.id+"-template").html()),l=a("#"+avdTable.id).DataTable({processing:!0,serverSide:!0,ajax:{url:avdTable.url,type:"POST",dataType:"json",headers:{"X-CSRF-TOKEN":avdTable.token}},scrollX:!0,sScrollXInner:"100%",sPaginationType:"full_numbers",buttons:["reset"],sPaginationType:"full_numbers",iDisplayLength:avdTable.limit,sDom:'CB<"clear"><"dataTables_header"lfr>t<"dataTables_footer"ip>',fnDrawCallback:function(e){avdTable.tableStyled||(a("#"+avdTable.id).closest(".dataTables_wrapper").find(".dataTables_length select").addClass("select "+avdTable.color+" glossy").styleSelect(),a("#btn-reset").addClass(avdTable.color+" glossy"),avdTable.tableStyled=!0)},columns:[{data:"name"},{data:"type"},{data:"order",className:"align-center"},{data:"label"},{data:"actions",className:"align-right",orderable:!1,searchable:!1,defaultContent:""},{className:"details-control",orderable:!1,searchable:!1,data:null,defaultContent:""}],order:[[0,"asc"]]});a("#"+avdTable.id).on("click",avdTable.openDetails,function(t){if(t.target===this){var o=a(this).closest("tr"),s=l.row(o),d=avdTable.id+"-"+s.data().id;s.child.isShown()?(s.child.hide(),o.removeClass("shown"),o.children().removeClass(avdTable.colorSel)):(s.child(e(s.data())).show(),ajaxTable(d,s.data()),o.addClass("shown"),o.children().addClass(avdTable.colorSel))}}),ajaxTable=function(e,l){a.ajax({url:l.details_url,type:"POST",dataType:"html",headers:{"X-CSRF-TOKEN":avdTable.token},beforeSend:function(){},success:function(l){a("#"+e).html(l)},error:function(a){ajaxFormError(a)}})},formModule=function(e){var t,o=a("#form-"+avdTable.id),s=o.attr("action");t="create"==e?avdTable.txtSave:avdTable.txtUpdate,a.ajax({type:"POST",dataType:"json",url:s,data:o.serialize(),beforeSend:function(){setBtn(4,avdTable.txtLoader,!1,"loader","btn-modal",!1,"silver")},success:function(a){1==a.success?(l.ajax.reload(),msgNotifica(!0,a.message,!0,!1),fechaModal()):(setBtn(4,t,!0,"icon-outbox","btn-modal",!1,"blue"),msgNotifica(!1,a.message,!0,!1))},error:function(a){setBtn(4,t,!0,"icon-outbox","btn-modal",!1,"blue"),ajaxFormError(a)}})},deleteModule=function(e,t){a.modal.confirm(avdTable.txtConfirm+" "+t+"?",function(){a.ajax({type:"post",dataType:"json",data:{_method:"delete",_token:avdTable.token},url:e,success:function(a){1==a.success?(l.ajax.reload(),msgNotifica(!0,a.message,!0,!1)):msgNotifica(!1,a.message,!0,!1)},error:function(a){msgNotifica(!1,avdTable.txtError,!0,!1)}})},function(){a.modal.alert(avdTable.txtCancel)})}}}(jQuery);
