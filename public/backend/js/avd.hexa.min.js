!function(e,a){var t,i,n,o,g,d,m,r,l,s=a,c=new FileReader;c.onload=function(e){s.getElementById("slika").src=e.target.result},loadCanvasFile=function(){if(0!==s.getElementById("uploadCanvas").files.length){var e=s.getElementById("uploadCanvas").files[0];/^(?:image\/bmp|image\/cis\-cod|image\/gif|image\/ief|image\/jpeg|image\/jpeg|image\/jpeg|image\/pipeg|image\/png|image\/svg\+xml|image\/tiff|image\/x\-cmu\-raster|image\/x\-cmx|image\/x\-icon|image\/x\-portable\-anymap|image\/x\-portable\-bitmap|image\/x\-portable\-graymap|image\/x\-portable\-pixmap|image\/x\-rgb|image\/x\-xbitmap|image\/x\-xpixmap|image\/x\-xwindowdump)$/i.test(e.type)?c.readAsDataURL(e):msgNotifica(!1,"Você deve selecionar um arquivo de imagem válido!",!0,!1)}},createCanvas=function(e,a){i=s.getElementById("myCanvas"),n=i.getContext("2d"),o=s.getElementById("pixCanvas"),(g=o.getContext("2d")).mozImageSmoothingEnabled=!1,g.webkitImageSmoothingEnabled=!1,d=s.getElementById("slika"),m=d.height,r=d.width,m<a&&r<e&&(n.mozImageSmoothingEnabled=!1,n.webkitImageSmoothingEnabled=!1),r/m<1.56667?e=r/m*a:a=e/(r/m),n.clearRect(0,0,i.width,i.height),n.drawImage(d,0,0,e,a);i.addEventListener("mousemove",function(n){this.style.cursor="crosshair",1,t=getMousePos(i,n),drawPix(r,m,o,g,d,Math.round(t.x*(r/e)),Math.round(t.y*(m/a)))},!1),i.addEventListener("mousedown",function(e){l=g.getImageData(0,0,150,150);var a="#"+d2h(l.data[45300])+d2h(l.data[45301])+d2h(l.data[45302]);s.getElementById("pixcolor").value=a,s.getElementById("barvadiv").style.backgroundColor=a},!1);o.addEventListener("mousedown",function(e){t=getMousePos(o,e),l=g.getImageData(0,0,150,150);var a=600*Math.round(t.y)+4*Math.round(t.x),i="#"+d2h(l.data[a+0])+d2h(l.data[a+1])+d2h(l.data[a+2]);s.getElementById("pixcolor").value=i,s.getElementById("pixcolor").select(),s.getElementById("barvadiv").style.backgroundColor=i},!1)},drawPix=function(e,a,t,i,n,o,g){i.clearRect(0,0,t.width,t.height),o<5&&(o=5),g<5&&(g=5),o>e-4&&(o=e-4),g>a-4&&(g=a-4),i.drawImage(n,o-5,g-5,9,9,0,0,t.width,t.height)},getMousePos=function(e,a){var t=e.getBoundingClientRect();return{x:a.clientX-t.left,y:a.clientY-t.top}},d2h=function(e){return("0"+e.toString(16)).slice(-2).toUpperCase()}}(window,document);
