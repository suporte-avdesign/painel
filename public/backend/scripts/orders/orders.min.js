!function(e,a){e.fn.loadTableOrders=function(){var a=Handlebars.compile(e("#painel-"+tableOrders.id).html()),t=e("#"+tableOrders.id).DataTable({processing:!0,serverSide:!0,ajax:{url:tableOrders.url,type:"POST",dataType:"json",headers:{"X-CSRF-TOKEN":tableOrders.token}},sScrollX:!0,sScrollXInner:"100%",buttons:["reset"],sPaginationType:"full_numbers",iDisplayLength:tableOrders.limit,sDom:'CB<"clear"><"dataTables_header"lfr>t<"dataTables_footer"ip>',fnDrawCallback:function(a){tableOrders.tableStyled||(e("#"+tableOrders.id).closest(".dataTables_wrapper").find(".dataTables_length select").addClass("select "+tableOrders.color+" glossy").styleSelect(),e("#btn-reset").addClass(tableOrders.color+" glossy"),tableOrders.tableStyled=!0)},columns:[{data:"id",className:"align-center"},{data:"state",className:"align-center"},{data:"name"},{data:"profile"},{data:"payment"},{data:"subtotal"},{data:"status"},{data:"created_at",className:"align-center"},{data:null,className:"details-control",orderable:!1,searchable:!1,defaultContent:""}],order:[[0,"desc"]]});e("#"+tableOrders.id).on("click",tableOrders.openDetails,function(){if(event.target===this){var s=e(this).closest("tr"),r=t.row(s);r.child.isShown()?(r.child.hide(),s.removeClass("shown"),s.children().removeClass(tableOrders.colorSel)):(r.child(a(r.data())).show(),s.addClass("shown"),s.children().addClass(tableOrders.colorSel))}}),e(".dataTables_filter input").unbind().bind("input",function(e){(this.value.length>=3||13==e.keyCode)&&t.search(this.value).draw(),""==this.value&&t.search("").draw()}),formOrders=function(a,s){var r=e("#form-"+s),l=r.attr("action");e.ajax({type:"POST",dataType:"json",url:l,data:r.serialize(),beforeSend:function(){setBtn(4,tableOrders.txtLoader,!1,"loader","btn-modal",!1,"silver")},success:function(e){1==e.success?(msgNotifica(!0,e.message,!0,!1),fechaModal(),t.ajax.reload()):msgNotifica(!1,e.message,!0,!1),setBtn(4,tableOrders.txtSave,!0,"icon-publish","btn-modal",!1,"blue")},error:function(e){setBtn(4,tableOrders.txtSave,!0,"icon-publish","btn-modal",!1,"blue"),ajaxFormError(e)}})},deleteOrder=function(a){e.modal.confirm(tableOrders.txtConfirm+"?",function(){e.ajax({type:"DELETE",dataType:"json",headers:{"X-CSRF-TOKEN":tableOrders.token},url:a,success:function(e){1==e.success?(t.ajax.reload(),msgNotifica(!0,e.message,!0,!1)):msgNotifica(!1,e.message,!0,!1)},error:function(e){ajaxFormError(e)}})},function(){e.modal.alert(tableOrders.txtCancel)})},printerPdf=function(a){e.ajax({type:"GET",dataType:"json",url:a,success:function(e){1==e.success?window.open(e.pdf,"_blank"):msgNotifica(!1,e.message,!0,!1)},error:function(e){ajaxFormError(e)}})},formEditWishlist=function(a){var t=e("#"+a),s=t.attr("action");e.ajax({type:"PUT",dataType:"json",url:s,data:t.serialize(),beforeSend:function(){setBtn(4,tableOrders.txtLoader,!1,"loader","btn-modal",!1,"silver")},success:function(e){1==e.success?(msgNotifica(!0,e.message,!0,!1),fechaModal()):msgNotifica(!1,e.message,!0,!1),setBtn(4,tableOrders.txtSave,!0,"icon-publish","btn-modal",!1,"blue")},error:function(e){setBtn(4,tableOrders.txtSave,!0,"icon-publish","btn-modal",!1,"blue"),ajaxFormError(e)}})}}}(jQuery);
