!function(a){a.fn.loadTableProfile=function(){var e=Handlebars.compile(a("#"+avdTable.id+"-template").html()),t=a("#"+avdTable.id).DataTable({processing:!0,serverSide:!0,ajax:{url:avdTable.url,type:"POST",dataType:"json",headers:{"X-CSRF-TOKEN":avdTable.token}},scrollX:!0,sScrollXInner:"100%",buttons:["reset"],sPaginationType:"full_numbers",iDisplayLength:avdTable.limit,sDom:'CB<"clear"><"dataTables_header"lfr>t<"dataTables_footer"ip>',fnDrawCallback:function(e){avdTable.tableStyled||(a("#"+avdTable.id).closest(".dataTables_wrapper").find(".dataTables_length select").addClass("select "+avdTable.color+" glossy").styleSelect(),a("#btn-reset").addClass(avdTable.color+" glossy"),avdTable.tableStyled=!0)},columns:[{data:"name"},{data:"label"},{data:"actions",className:"align-right",orderable:!1,searchable:!1,defaultContent:""},{className:"details-control",orderable:!1,searchable:!1,data:null,defaultContent:""}],order:[[0,"asc"]]});a("#"+avdTable.id).on("click",avdTable.openDetails,function(){if(event.target===this){var l=a(this).closest("tr"),o=t.row(l),s=avdTable.id+"-"+o.data().id;o.child.isShown()?(o.child.hide(),l.removeClass("shown"),l.children().removeClass(avdTable.colorSel)):(o.child(e(o.data())).show(),ajaxTable(s,o.data()),l.addClass("shown"),l.children().addClass(avdTable.colorSel))}}),ajaxTable=function(e,t){a.ajax({url:t.details_url,type:"POST",dataType:"html",headers:{"X-CSRF-TOKEN":avdTable.token},beforeSend:function(){},success:function(t){a("#"+e).html(t)},error:function(a){ajaxFormError(a)}})},formProfile=function(e){var l,o=a("#form-"+avdTable.id),s=o.attr("action");l="create"==e?avdTable.txtSave:avdTable.txtUpdate,a.ajax({type:"POST",dataType:"json",url:s,data:o.serialize(),beforeSend:function(){setBtn(4,avdTable.txtLoader,!1,"loader","btn-modal",!1,"silver")},success:function(a){1==a.success?(t.ajax.reload(),msgNotifica(!0,a.message,!0,!1),fechaModal()):(setBtn(4,l,!0,"icon-outbox","btn-modal",!1,"blue"),msgNotifica(!1,a.message,!0,!1))},error:function(a){setBtn(4,l,!0,"icon-outbox","btn-modal",!1,"blue"),ajaxFormError(a)}})},deleteProfile=function(e,l){a.modal.confirm(avdTable.txtConfirm+" "+l+"?",function(){a.ajax({type:"post",dataType:"json",data:{_method:"delete",_token:avdTable.token},url:e,success:function(a){1==a.success?(t.ajax.reload(),msgNotifica(!0,a.message,!0,!1)):msgNotifica(!1,a.message,!0,!1)},error:function(a){msgNotifica(!1,avdTable.txtError,!0,!1)}})},function(){a.modal.alert(avdTable.txtCancel)})},formUsers=function(e){var l,o=a("#form-"+avdTable.id),s=o.attr("action");l="create"==e?avdTable.txtSave:avdTable.txtUpdate,a.ajax({type:"POST",dataType:"json",url:s,data:o.serialize(),beforeSend:function(){setBtn(4,avdTable.txtLoader,!1,"loader","btn-modal",!1,"silver")},success:function(a){1==a.success?(t.ajax.reload(),msgNotifica(!0,a.message,!0,!1),fechaModal()):(setBtn(4,l,!0,"icon-outbox","btn-modal",!1,"blue"),msgNotifica(!1,a.message,!0,!1))},error:function(a){setBtn(4,l,!0,"icon-outbox","btn-modal",!1,"blue"),ajaxFormError(a)}})},deleteUsers=function(e,t,l){a.modal.confirm(avdTable.txtConfirm+" "+l+"?",function(){a.ajax({type:"post",dataType:"json",data:{name:l,_method:"delete",_token:avdTable.token},url:e,success:function(e){1==e.success?(a("#id_"+t).hide(),msgNotifica(!0,e.message,!0,!1)):msgNotifica(!1,e.message,!0,!1)},error:function(a){msgNotifica(!1,avdTable.txtError,!0,!1)}})},function(){a.modal.alert(avdTable.txtCancel)})}}}(jQuery);
